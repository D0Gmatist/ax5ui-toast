!function(t,i){var n=ax5.util,e=ax5.dom,s=function(){this.main=function(){i&&i.call(this),this.config={click_event_name:"click",theme:"default",width:300,axicon:'<i class="axi axi-axisj"></i>',msg:"",display_time:3e3,animate_time:200}}.apply(this,arguments),this.toast_container=null,this.queue=[];var t=this.config;this.init=function(){var t=ax5.get_guid();e.append(document.body,'<div class="ax5-ui-toast-container" data-toast-container="'+t+'"></div>'),this.toast_container=ax5.dom('[data-toast-container="'+t+'"]')},this.push=function(i,e){return n.is_string(i)&&(i={title:t.title,msg:i}),i.toast_type="push",i.theme=i.theme||t.theme||"",this.open(i,e),this},this.confirm=function(i,e){return n.is_string(i)&&(i={title:t.title,msg:i}),i.toast_type="confirm",i.theme=i.theme||t.theme||"","undefined"==typeof i.btns&&(i.btns={ok:{label:"ok",theme:i.theme}}),this.open(i,e),this},this.get_content=function(i,e){var s=[];return s.push('<div id="'+i+'" data-ax5-ui="toast" class="ax5-ui-toast '+e.theme+'">'),s.push('<div class="ax-toast-axicon">'),s.push(e.axicon||t.axicon||""),s.push("</div>"),s.push('<div class="ax-toast-body">'),s.push((e.msg||t.msg||"").replace(/\n/g,"<br/>")),s.push("</div>"),e.btns&&(s.push('<div class="ax-toast-buttons">'),s.push('<div class="ax-button-wrap">'),n.each(e.btns,function(t,i){s.push('<button type="button" data-ax-toast-btn="'+t+'" class="ax-btn '+this.theme+'">'+this.label+"</button>")}),s.push("</div>"),s.push("</div>")),s.push('<div style="clear:both;"></div>'),s.push("</div>"),s.join("")},this.open=function(i,n){var e,s={};i.id="ax5-toast-"+this.queue.length,this.queue.push(i),s={width:i.width||t.width},this.toast_container.prepend(this.get_content(i.id,i)),e=ax5.dom("#"+i.id),e.css({width:s.width}),"push"===i.toast_type?setTimeout(function(){this.close(i,e,n)}.bind(this),t.display_time):"confirm"===i.toast_type&&e.find("[data-ax-toast-btn]").on(t.click_event_name,function(t){this.btn_onclick(t||window.event,i,e,n)}.bind(this))},this.btn_onclick=function(t,i,n,s,a,o){if(a=e.parent(t.target,function(t){return ax5.dom.attr(t,"data-ax-toast-btn")?!0:void 0})){o=e.attr(a,"data-ax-toast-btn");var u={key:o,value:i.btns[o],toast_id:i.id,btn_target:a};i.btns[o].onclick?i.btns[o].onclick.call(u,o):"confirm"===i.toast_type&&(s&&s.call(u,o),this.close(i,n))}},this.onkeyup=function(t,i,n,e,s){t.keyCode==ax5.info.event_keys.ESC&&this.close()},this.close=function(i,e,s){"undefined"==typeof e&&(i=n.last(this.queue),e=ax5.dom("#"+i.id));var a={toast_id:i.id};return e.class_name("add","push"==i.toast_type?"removed":"destroy"),this.queue=n.filter(this.queue,function(){return i.id!=this.id}),setTimeout(function(){e.remove(),s&&s.call(a)},t.animate_time),this}};n.is_function(i)&&(s.prototype=new i),t.toast=s,"function"==typeof define&&define.amd&&define("_ax5_ui_toast",[],function(){return s})}(ax5.ui,ax5.ui.root);